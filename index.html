<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acculturation IA - Module 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a4d7a;
            --primary-light: #2d6ba8;
            --accent: #d4af37;
            --accent-dark: #b8962e;
            --bg: #fafbfc;
            --card-bg: #ffffff;
            --text: #1f2937;
            --text-light: #6b7280;
            --success: #10b981;
            --progress-bg: #e5e7eb;
            --shadow: rgba(0, 0, 0, 0.08);
            --border: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Login Screen */
        .login-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            position: relative;
            overflow: hidden;
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></svg>');
            opacity: 0.3;
        }

        .login-box {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 450px;
            width: 90%;
            position: relative;
            z-index: 1;
            animation: fadeInScale 0.6s ease-out;
        }

        .login-logo {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-logo h1 {
            font-family: 'Playfair Display', serif;
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .login-logo p {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 77, 122, 0.1);
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 77, 122, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Main App */
        .app-container {
            display: none;
        }

        .app-container.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 2rem 2rem 4rem;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></svg>');
            opacity: 0.3;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .user-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .module-badge {
            display: inline-block;
            background: var(--accent);
            color: var(--primary);
            padding: 0.5rem 1.2rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
            animation: fadeInDown 0.6s ease-out;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            animation: fadeInDown 0.8s ease-out;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            animation: fadeInDown 1s ease-out;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 1s ease-out;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .container {
            max-width: 1200px;
            margin: -2rem auto 2rem;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }

        .progress-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 6px var(--shadow);
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease-out;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .progress-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .progress-percentage {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .progress-bar-container {
            background: var(--progress-bg);
            height: 12px;
            border-radius: 50px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-dark), var(--accent));
            border-radius: 50px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        .content-grid {
            display: grid;
            gap: 2rem;
        }

        .lesson-card {
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            animation: fadeInUp 1s ease-out;
            cursor: pointer;
        }

        .lesson-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px var(--shadow);
            border-color: var(--accent);
        }

        .lesson-card.completed {
            border-color: var(--success);
        }

        .lesson-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .lesson-card.locked:hover {
            transform: none;
        }

        .lesson-header {
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        }

        .lesson-number {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .lesson-number.completed {
            background: var(--success);
        }

        .lesson-info {
            flex: 1;
        }

        .lesson-title {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .lesson-description {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        .lesson-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            font-size: 0.875rem;
            color: var(--text-light);
            flex-wrap: wrap;
        }

        .lesson-body {
            padding: 0 1.5rem 1.5rem;
            display: none;
        }

        .lesson-body.active {
            display: block;
            animation: slideDown 0.4s ease-out;
        }

        .content-section {
            margin-bottom: 2rem;
        }

        .content-section h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .content-section p {
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .content-section ul {
            list-style: none;
            padding: 0;
        }

        .content-section li {
            padding-left: 1.5rem;
            margin-bottom: 0.75rem;
            position: relative;
        }

        .content-section li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: 700;
        }

        .quiz-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .quiz-question {
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .quiz-option {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: #f0f7ff;
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: #e0f2fe;
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: #d1fae5;
        }

        .quiz-option.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            font-weight: 500;
        }

        .quiz-feedback.correct {
            background: #d1fae5;
            color: #065f46;
        }

        .quiz-feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover:not(:disabled) {
            background: #059669;
        }

        .btn-secondary {
            background: var(--accent);
            color: var(--primary);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--accent-dark);
        }

        .badge-showcase {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 2px 8px var(--shadow);
            margin-top: 2rem;
            animation: fadeInUp 1.2s ease-out;
        }

        .badge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .badge-item {
            text-align: center;
            padding: 1.5rem;
            border-radius: 12px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .badge-item.unlocked {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            animation: badgeUnlock 0.6s ease-out;
        }

        .badge-item.locked {
            opacity: 0.4;
        }

        .badge-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .badge-name {
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--primary);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: scaleIn 0.3s ease-out;
        }

        .modal-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }

        /* Time tracking */
        .time-display {
            font-size: 0.875rem;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 2000px;
            }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes badgeUnlock {
            0% {
                transform: scale(0.8) rotate(-5deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.1) rotate(5deg);
            }
            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .container { padding: 0 1rem; }
            .stats-container { grid-template-columns: 1fr; }
            .stat-value { font-size: 1.5rem; }
            .login-box { padding: 2rem 1.5rem; }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
        <div class="login-box">
            <div class="login-logo">
                <h1>üéì Acculturation IA</h1>
                <p>Module 1 : Les Bases de l'IA</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="firstName">Pr√©nom *</label>
                    <input type="text" id="firstName" required placeholder="Jean">
                </div>
                <div class="form-group">
                    <label for="lastName">Nom *</label>
                    <input type="text" id="lastName" required placeholder="Dupont">
                </div>
                <div class="form-group">
                    <label for="email">Email professionnel *</label>
                    <input type="email" id="email" required placeholder="jean.dupont@banque.fr">
                </div>
                <div class="form-group">
                    <label for="department">D√©partement *</label>
                    <select id="department" required>
                        <option value="">S√©lectionnez...</option>
                        <option value="Conseil Client√®le">Conseil Client√®le</option>
                        <option value="Conformit√©">Conformit√©</option>
                        <option value="Contr√¥le">Contr√¥le</option>
                        <option value="Juridique">Juridique</option>
                        <option value="Risques">Risques</option>
                        <option value="IT">IT / Informatique</option>
                        <option value="Marketing">Marketing</option>
                        <option value="RH">Ressources Humaines</option>
                        <option value="Direction">Direction</option>
                        <option value="Autre">Autre</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" id="loginBtn">
                    Commencer le module üöÄ
                </button>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container" id="appContainer">
        <div class="header">
            <div class="header-content">
                <div class="user-bar">
                    <div class="user-info">
                        <div class="user-avatar" id="userAvatar"></div>
                        <div>
                            <div style="font-weight: 700;" id="userName"></div>
                            <div style="font-size: 0.875rem; opacity: 0.8;" id="userDepartment"></div>
                        </div>
                    </div>
                    <button class="logout-btn" onclick="logout()">D√©connexion</button>
                </div>
                
                <span class="module-badge">Module 1 / 12</span>
                <h1>Les Bases de l'Intelligence Artificielle</h1>
                <p class="subtitle">Comprendre les fondamentaux de l'IA pour mieux l'utiliser au quotidien</p>
                
                <div class="stats-container">
                    <div class="stat-card" style="animation-delay: 0.2s">
                        <div class="stat-label">Temps estim√©</div>
                        <div class="stat-value">‚è±Ô∏è 15 min</div>
                    </div>
                    <div class="stat-card" style="animation-delay: 0.3s">
                        <div class="stat-label">Points gagn√©s</div>
                        <div class="stat-value">üèÜ <span id="totalPoints">0</span> / 100</div>
                    </div>
                    <div class="stat-card" style="animation-delay: 0.4s">
                        <div class="stat-label">Temps pass√©</div>
                        <div class="stat-value">‚è≤Ô∏è <span id="timeSpent">0</span> min</div>
                    </div>
                    <div class="stat-card" style="animation-delay: 0.5s">
                        <div class="stat-label">Progression</div>
                        <div class="stat-value">üìä <span id="userProgress">0</span>%</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="progress-card">
                <div class="progress-header">
                    <span class="progress-title">Votre avancement dans ce module</span>
                    <span class="progress-percentage" id="progressPercent">0%</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
            </div>

            <div class="content-grid" id="lessonsContainer">
                <!-- Lessons will be inserted here -->
            </div>

            <div class="badge-showcase">
                <h2 style="font-family: 'Playfair Display', serif; color: var(--primary); margin-bottom: 0.5rem;">
                    üèÖ Badges √† d√©bloquer
                </h2>
                <p style="color: var(--text-light); margin-bottom: 1.5rem;">
                    Compl√©tez les le√ßons et les quiz pour gagner des badges et faire certifier vos comp√©tences
                </p>
                <div class="badge-grid">
                    <div class="badge-item unlocked" id="badge-explorer">
                        <div class="badge-icon">üî∞</div>
                        <div class="badge-name">Explorateur IA</div>
                    </div>
                    <div class="badge-item locked" id="badge-scholar">
                        <div class="badge-icon">üìö</div>
                        <div class="badge-name">√ârudit IA</div>
                    </div>
                    <div class="badge-item locked" id="badge-master">
                        <div class="badge-icon">üéì</div>
                        <div class="badge-name">Ma√Ætre IA</div>
                    </div>
                    <div class="badge-item locked" id="badge-certified">
                        <div class="badge-icon">‚≠ê</div>
                        <div class="badge-name">Certifi√© Module 1</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for completion -->
    <div class="modal" id="completionModal">
        <div class="modal-content">
            <div class="modal-icon">üéâ</div>
            <h2 class="modal-title">F√©licitations !</h2>
            <p style="color: var(--text-light); margin-bottom: 1rem;">
                Vous avez termin√© le Module 1 : Les Bases de l'IA
            </p>
            <p style="font-size: 2rem; font-weight: 700; color: var(--accent); margin: 1rem 0;">
                +100 points
            </p>
            <p style="color: var(--text);">
                Vous avez d√©bloqu√© le badge <strong>"Certifi√© Module 1"</strong> ‚≠ê
            </p>
            <p style="color: var(--text-light); margin-top: 1rem; font-size: 0.9rem;">
                Vos r√©sultats ont √©t√© enregistr√©s et sont accessibles au responsable de formation.
            </p>
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="closeModal()">Continuer</button>
            </div>
        </div>
    </div>

    <script>
        // Configuration - REMPLACEZ PAR VOS VRAIES VALEURS
        const CONFIG = {
            // Option 1: GitHub Gist (pour le stockage simple)
            GIST_ID: 'VOTRE_GIST_ID', // Cr√©er un Gist sur GitHub
            GITHUB_TOKEN: 'VOTRE_TOKEN', // Token GitHub avec permissions gist
            
            // Option 2: Firebase (recommand√© pour plus de 50 utilisateurs)
            USE_FIREBASE: false,
            FIREBASE_CONFIG: {
                apiKey: "VOTRE_API_KEY",
                authDomain: "VOTRE_PROJECT.firebaseapp.com",
                projectId: "VOTRE_PROJECT_ID",
                storageBucket: "VOTRE_PROJECT.appspot.com",
                messagingSenderId: "VOTRE_SENDER_ID",
                appId: "VOTRE_APP_ID"
            }
        };

        const lessons = [
            {
                id: 1,
                title: "Qu'est-ce que l'Intelligence Artificielle ?",
                description: "Comprendre la d√©finition et les concepts fondamentaux de l'IA",
                duration: "3 min",
                points: 15,
                content: {
                    sections: [
                        {
                            title: "D√©finition simple",
                            text: "L'Intelligence Artificielle (IA) est un ensemble de technologies permettant aux machines d'effectuer des t√¢ches qui n√©cessiteraient normalement l'intelligence humaine : comprendre le langage, reconna√Ætre des images, prendre des d√©cisions, apprendre de l'exp√©rience."
                        },
                        {
                            title: "L'IA dans votre quotidien",
                            text: "Vous utilisez d√©j√† l'IA sans le savoir :",
                            list: [
                                "Les recommandations Netflix et Spotify",
                                "La d√©tection de fraude sur votre carte bancaire",
                                "Les assistants vocaux (Siri, Alexa)",
                                "La correction automatique sur votre t√©l√©phone",
                                "Les filtres anti-spam dans votre messagerie"
                            ]
                        },
                        {
                            title: "Trois points cl√©s √† retenir",
                            list: [
                                "L'IA apprend √† partir de donn√©es (elle n'est pas programm√©e pour chaque cas)",
                                "L'IA excelle dans les t√¢ches r√©p√©titives et l'analyse de grands volumes de donn√©es",
                                "L'IA reste un outil : elle n√©cessite l'expertise humaine pour √™tre utilis√©e efficacement"
                            ]
                        }
                    ]
                },
                quiz: {
                    question: "Quelle affirmation sur l'IA est correcte ?",
                    options: [
                        "L'IA peut remplacer totalement le jugement humain",
                        "L'IA apprend √† partir de donn√©es et s'am√©liore avec l'exp√©rience",
                        "L'IA est seulement utilis√©e dans les films de science-fiction",
                        "L'IA fonctionne sans avoir besoin de donn√©es"
                    ],
                    correct: 1,
                    feedback: {
                        correct: "Exact ! L'IA utilise le machine learning pour apprendre √† partir de donn√©es et am√©liorer ses performances.",
                        incorrect: "Pas tout √† fait. L'IA apprend √† partir de donn√©es et s'am√©liore avec l'exp√©rience. Elle compl√®te l'expertise humaine mais ne la remplace pas."
                    }
                }
            },
            {
                id: 2,
                title: "IA G√©n√©rative : ChatGPT et ses cousins",
                description: "D√©couvrir les IA conversationnelles et leurs capacit√©s",
                duration: "4 min",
                points: 20,
                content: {
                    sections: [
                        {
                            title: "Qu'est-ce qu'une IA g√©n√©rative ?",
                            text: "Une IA g√©n√©rative peut cr√©er du nouveau contenu : texte, images, code, musique... ChatGPT, Claude, Gemini sont des IA g√©n√©ratives sp√©cialis√©es dans le langage."
                        },
                        {
                            title: "Ce qu'elles peuvent faire",
                            list: [
                                "R√©diger et r√©sumer des documents",
                                "R√©pondre √† des questions complexes",
                                "Traduire dans plusieurs langues",
                                "Analyser et extraire des informations",
                                "G√©n√©rer du code informatique",
                                "Aider √† la r√©flexion et au brainstorming"
                            ]
                        },
                        {
                            title: "Leurs limites importantes",
                            list: [
                                "Elles peuvent \"halluciner\" (inventer des informations fausses)",
                                "Leurs connaissances ont une date de coupure",
                                "Elles ne comprennent pas vraiment comme un humain",
                                "Elles n√©cessitent une validation humaine",
                                "Elles reproduisent les biais pr√©sents dans leurs donn√©es d'entra√Ænement"
                            ]
                        },
                        {
                            title: "Dans le secteur bancaire",
                            text: "Les IA g√©n√©ratives peuvent aider pour : la r√©daction de notes de synth√®se, l'analyse de documents r√©glementaires, la pr√©paration de pr√©sentations, la recherche d'informations, et l'automatisation de t√¢ches administratives. Toujours avec validation humaine pour les d√©cisions importantes."
                        }
                    ]
                },
                quiz: {
                    question: "Quelle pr√©caution est essentielle avec les IA g√©n√©ratives ?",
                    options: [
                        "Ne jamais les utiliser dans un contexte professionnel",
                        "Toujours v√©rifier les informations car elles peuvent 'halluciner'",
                        "Les utiliser uniquement pour des t√¢ches simples",
                        "Leur faire totalement confiance car elles ne se trompent jamais"
                    ],
                    correct: 1,
                    feedback: {
                        correct: "Parfait ! Les IA peuvent g√©n√©rer des informations fausses avec confiance. La v√©rification humaine est indispensable.",
                        incorrect: "Non. Le point crucial est que les IA peuvent 'halluciner' et g√©n√©rer des fausses informations. Il faut toujours v√©rifier leurs r√©ponses."
                    }
                }
            },
            {
                id: 3,
                title: "L'Art du Prompting",
                description: "Apprendre √† communiquer efficacement avec l'IA",
                duration: "4 min",
                points: 25,
                content: {
                    sections: [
                        {
                            title: "Qu'est-ce qu'un prompt ?",
                            text: "Un prompt est l'instruction que vous donnez √† l'IA. La qualit√© de votre prompt d√©termine directement la qualit√© de la r√©ponse. Un bon prompt est clair, pr√©cis et contextualis√©."
                        },
                        {
                            title: "Les 5 r√®gles d'un bon prompt",
                            list: [
                                "√ätre sp√©cifique : \"R√©dige un email professionnel\" vs \"R√©dige un email de 150 mots pour refuser poliment une demande de cr√©dit\"",
                                "Donner du contexte : pr√©cisez votre r√¥le, le public vis√©, le ton souhait√©",
                                "Structurer votre demande : utilisez des listes, des √©tapes, des exemples",
                                "D√©finir le format attendu : tableau, liste, paragraphe, email...",
                                "It√©rer : affinez progressivement en fonction des r√©ponses"
                            ]
                        },
                        {
                            title: "Exemple pratique",
                            text: "‚ùå Mauvais prompt : 'Explique-moi la conformit√©'\n\n‚úÖ Bon prompt : 'Je suis conseiller bancaire. Explique-moi en 3 paragraphes simples les principes cl√©s de la conformit√© KYC (Know Your Customer) que je dois appliquer lors de l'ouverture d'un compte client. Utilise des exemples concrets.'"
                        },
                        {
                            title: "Techniques avanc√©es",
                            list: [
                                "Chain-of-thought : demandez √† l'IA de raisonner √©tape par √©tape",
                                "Few-shot learning : donnez 2-3 exemples du r√©sultat attendu",
                                "Assignation de r√¥le : 'Tu es un expert en r√©glementation bancaire...'",
                                "Contraintes : 'en maximum 200 mots', 'sans jargon technique'"
                            ]
                        }
                    ]
                },
                quiz: {
                    question: "Quel prompt sera le plus efficace ?",
                    options: [
                        "Fais-moi un r√©sum√©",
                        "R√©sume ce document",
                        "En tant que conseiller bancaire, r√©sume ce document de 10 pages en 5 points cl√©s avec les actions √† retenir pour mon √©quipe",
                        "Peux-tu r√©sumer s'il te pla√Æt ?"
                    ],
                    correct: 2,
                    feedback: {
                        correct: "Excellent ! Ce prompt contient le contexte (conseiller bancaire), le format (5 points cl√©s), et l'objectif (actions pour l'√©quipe).",
                        incorrect: "Ce prompt manque de pr√©cision. Le meilleur prompt sp√©cifie le r√¥le, le format attendu et l'objectif : 'En tant que conseiller bancaire, r√©sume en 5 points cl√©s avec les actions √† retenir'."
                    }
                }
            },
            {
                id: 4,
                title: "S√©curit√© et Confidentialit√©",
                description: "Prot√©ger les donn√©es sensibles lors de l'utilisation de l'IA",
                duration: "4 min",
                points: 20,
                content: {
                    sections: [
                        {
                            title: "R√®gles d'or de s√©curit√©",
                            text: "Dans le secteur bancaire, la protection des donn√©es est primordiale. Voici ce que vous ne devez JAMAIS partager avec une IA publique :",
                            list: [
                                "Donn√©es personnelles clients (noms, num√©ros de compte, RIB...)",
                                "Informations confidentielles de l'entreprise",
                                "Documents internes non publics",
                                "Donn√©es soumises au secret bancaire",
                                "Informations strat√©giques ou sensibles"
                            ]
                        },
                        {
                            title: "Bonnes pratiques",
                            list: [
                                "Anonymisez syst√©matiquement : remplacez les vrais noms par 'Client A', 'Client B'",
                                "Utilisez des donn√©es fictives pour vos exemples",
                                "Privil√©giez les solutions IA internes √† l'entreprise quand disponibles",
                                "Ne copiez-collez jamais directement depuis vos syst√®mes internes",
                                "Relisez toujours avant d'envoyer votre prompt"
                            ]
                        },
                        {
                            title: "Cas pratiques s√ªrs",
                            text: "Vous pouvez utiliser l'IA pour : apprendre des concepts g√©n√©raux, obtenir des mod√®les de documents (anonymis√©s), comprendre la r√©glementation, am√©liorer votre communication, g√©n√©rer des id√©es cr√©atives, traduire du contenu non-sensible."
                        },
                        {
                            title: "En cas de doute",
                            text: "Si vous h√©sitez sur la sensibilit√© d'une information, ne la partagez pas. Consultez votre responsable ou le service conformit√©. La s√©curit√© des donn√©es de nos clients est notre priorit√© absolue."
                        }
                    ]
                },
                quiz: {
                    question: "Quelle utilisation de l'IA est acceptable ?",
                    options: [
                        "Copier-coller un email client pour qu'il soit reformul√©",
                        "Analyser un document confidentiel de l'entreprise",
                        "Demander 'Explique-moi le principe du RGPD en termes simples'",
                        "Partager les coordonn√©es d'un client pour cr√©er un email personnalis√©"
                    ],
                    correct: 2,
                    feedback: {
                        correct: "Parfait ! Demander des explications sur des concepts g√©n√©raux ne n√©cessite pas de partager des donn√©es sensibles.",
                        incorrect: "Cette action comporte un risque de confidentialit√©. L'utilisation s√ªre est : 'Explique-moi le principe du RGPD', qui ne n√©cessite aucune donn√©e sensible."
                    }
                }
            },
            {
                id: 5,
                title: "L'IA dans votre m√©tier",
                description: "Cas d'usage concrets pour le secteur bancaire",
                duration: "4 min",
                points: 20,
                content: {
                    sections: [
                        {
                            title: "Pour les conseillers bancaires",
                            list: [
                                "Pr√©parer des argumentaires de vente personnalis√©s",
                                "G√©n√©rer des emails de suivi client (avec donn√©es anonymis√©es)",
                                "Cr√©er des supports de pr√©sentation produits",
                                "Comprendre rapidement de nouveaux produits financiers",
                                "Simuler des sc√©narios de conseil client"
                            ]
                        },
                        {
                            title: "Pour les fonctions support (conformit√©, contr√¥le, juridique)",
                            list: [
                                "Analyser et r√©sumer des textes r√©glementaires",
                                "G√©n√©rer des mod√®les de proc√©dures (√† valider)",
                                "Rechercher des informations dans la documentation",
                                "R√©diger des notes de synth√®se",
                                "Comparer diff√©rentes interpr√©tations r√©glementaires"
                            ]
                        },
                        {
                            title: "Gains de productivit√© mesurables",
                            text: "Des √©tudes montrent que l'IA peut faire gagner 30-40% de temps sur les t√¢ches administratives et r√©dactionnelles. Ce temps lib√©r√© peut √™tre r√©investi dans l'accompagnement client et l'analyse √† valeur ajout√©e."
                        },
                        {
                            title: "Votre r√¥le reste central",
                            text: "L'IA est un assistant, pas un rempla√ßant. Votre expertise m√©tier, votre relation client, votre jugement et votre conformit√© aux r√®gles sont irrempla√ßables. L'IA amplifie vos capacit√©s, elle ne les supplante pas."
                        }
                    ]
                },
                quiz: {
                    question: "Quel est le meilleur √©tat d'esprit face √† l'IA ?",
                    options: [
                        "L'IA va remplacer mon travail, il faut r√©sister",
                        "L'IA est un assistant qui me fait gagner du temps sur les t√¢ches √† faible valeur pour me concentrer sur l'essentiel",
                        "L'IA sait mieux que moi, je peux lui faire totalement confiance",
                        "L'IA est trop compliqu√©e, je pr√©f√®re ne pas l'utiliser"
                    ],
                    correct: 1,
                    feedback: {
                        correct: "Exactement ! L'IA est un outil d'augmentation de vos capacit√©s, qui lib√®re du temps pour les t√¢ches √† haute valeur ajout√©e.",
                        incorrect: "L'approche optimale est de voir l'IA comme un assistant qui lib√®re du temps pour se concentrer sur ce qui compte vraiment : la relation client et l'expertise."
                    }
                }
            }
        ];

        let currentUser = null;
        let state = {
            completedLessons: [],
            quizScores: {},
            totalPoints: 0,
            unlockedBadges: ['explorer'],
            startTime: null,
            lessonTimes: {},
            quizAttempts: {}
        };

        let sessionStartTime = null;
        let timerInterval = null;

        // Authentication
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;
            const department = document.getElementById('department').value;

            currentUser = {
                firstName,
                lastName,
                email,
                department,
                loginTime: new Date().toISOString()
            };

            // Load existing progress
            await loadUserProgress();

            // Show app
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appContainer').classList.add('active');

            // Update user info
            document.getElementById('userAvatar').textContent = firstName.charAt(0).toUpperCase();
            document.getElementById('userName').textContent = `${firstName} ${lastName}`;
            document.getElementById('userDepartment').textContent = department;

            // Start session timer
            sessionStartTime = Date.now();
            startTimer();

            // Initialize
            renderLessons();
            updateProgress();
        });

        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - sessionStartTime) / 1000 / 60);
                document.getElementById('timeSpent').textContent = elapsed;
            }, 30000); // Update every 30 seconds
        }

        function logout() {
            if (confirm('√ätes-vous s√ªr de vouloir vous d√©connecter ? Votre progression est sauvegard√©e.')) {
                clearInterval(timerInterval);
                saveUserProgress();
                
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('appContainer').classList.remove('active');
                
                currentUser = null;
                document.getElementById('loginForm').reset();
            }
        }

        async function loadUserProgress() {
            const storageKey = `user_${currentUser.email}_module1`;
            
            try {
                const saved = await window.storage.get(storageKey);
                if (saved && saved.value) {
                    state = JSON.parse(saved.value);
                }
            } catch (error) {
                console.log('No saved progress found');
            }
        }

        async function saveUserProgress() {
            const storageKey = `user_${currentUser.email}_module1`;
            
            const progressData = {
                ...state,
                user: currentUser,
                lastUpdated: new Date().toISOString(),
                sessionTime: Math.floor((Date.now() - sessionStartTime) / 1000 / 60)
            };

            try {
                await window.storage.set(storageKey, JSON.stringify(progressData));
                
                // Also save to shared tracking (for admin dashboard)
                await saveToTracking(progressData);
            } catch (error) {
                console.error('Failed to save progress:', error);
            }
        }

        async function saveToTracking(progressData) {
            const trackingKey = `tracking_${currentUser.email}`;
            
            const trackingData = {
                email: currentUser.email,
                name: `${currentUser.firstName} ${currentUser.lastName}`,
                department: currentUser.department,
                progress: (state.completedLessons.length / lessons.length) * 100,
                points: state.totalPoints,
                completedLessons: state.completedLessons.length,
                totalLessons: lessons.length,
                badges: state.unlockedBadges.length,
                quizScores: state.quizScores,
                quizAttempts: state.quizAttempts,
                lastActivity: new Date().toISOString(),
                completed: state.completedLessons.length === lessons.length,
                sessionTime: Math.floor((Date.now() - sessionStartTime) / 1000 / 60)
            };

            try {
                await window.storage.set(trackingKey, JSON.stringify(trackingData), true); // shared = true
            } catch (error) {
                console.error('Failed to save tracking data:', error);
            }
        }

        function updateProgress() {
            const progress = (state.completedLessons.length / lessons.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('userProgress').textContent = Math.round(progress);
            document.getElementById('totalPoints').textContent = state.totalPoints;

            if (state.completedLessons.length >= 1) unlockBadge('scholar');
            if (state.completedLessons.length >= 3) unlockBadge('master');
            if (state.completedLessons.length === lessons.length) {
                unlockBadge('certified');
                showCompletionModal();
            }

            saveUserProgress();
        }

        function unlockBadge(badgeId) {
            if (!state.unlockedBadges.includes(badgeId)) {
                state.unlockedBadges.push(badgeId);
                const badge = document.getElementById('badge-' + badgeId);
                badge.classList.remove('locked');
                badge.classList.add('unlocked');
            }
        }

        function renderLessons() {
            const container = document.getElementById('lessonsContainer');
            container.innerHTML = '';

            lessons.forEach((lesson, index) => {
                const isCompleted = state.completedLessons.includes(lesson.id);
                const isLocked = index > 0 && !state.completedLessons.includes(lessons[index - 1].id);

                const card = document.createElement('div');
                card.className = `lesson-card ${isCompleted ? 'completed' : ''} ${isLocked ? 'locked' : ''}`;
                card.style.animationDelay = `${index * 0.1}s`;

                let contentHTML = '';
                lesson.content.sections.forEach(section => {
                    contentHTML += `<div class="content-section">
                        <h3>${section.title}</h3>
                        ${section.text ? `<p>${section.text}</p>` : ''}
                        ${section.list ? `<ul>${section.list.map(item => `<li>${item}</li>`).join('')}</ul>` : ''}
                    </div>`;
                });

                const attempts = state.quizAttempts[lesson.id] || 0;
                const score = state.quizScores[lesson.id] || null;

                card.innerHTML = `
                    <div class="lesson-header" onclick="${isLocked ? '' : `toggleLesson(${lesson.id})`}">
                        <div class="lesson-number ${isCompleted ? 'completed' : ''}">${isLocked ? 'üîí' : lesson.id}</div>
                        <div class="lesson-info">
                            <div class="lesson-title">${lesson.title}</div>
                            <div class="lesson-description">${lesson.description}</div>
                            <div class="lesson-meta">
                                <span>‚è±Ô∏è ${lesson.duration}</span>
                                <span>üèÜ ${lesson.points} points</span>
                                ${attempts > 0 ? `<span>üéØ ${attempts} tentative${attempts > 1 ? 's' : ''}</span>` : ''}
                                ${isCompleted ? '<span style="color: var(--success)">‚úì Compl√©t√©</span>' : ''}
                            </div>
                        </div>
                    </div>
                    <div class="lesson-body" id="lesson-body-${lesson.id}">
                        ${contentHTML}
                        <div class="quiz-container">
                            <div class="quiz-question">${lesson.quiz.question}</div>
                            <div class="quiz-options" id="quiz-${lesson.id}">
                                ${lesson.quiz.options.map((opt, i) => `
                                    <div class="quiz-option" onclick="selectOption(${lesson.id}, ${i})" data-index="${i}">
                                        ${opt}
                                    </div>
                                `).join('')}
                            </div>
                            <div class="quiz-feedback" id="feedback-${lesson.id}" style="display: none;"></div>
                            <button class="btn btn-primary" style="margin-top: 1rem;" onclick="submitQuiz(${lesson.id})" id="submit-${lesson.id}">
                                Valider la r√©ponse
                            </button>
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        function toggleLesson(lessonId) {
            const body = document.getElementById(`lesson-body-${lessonId}`);
            const allBodies = document.querySelectorAll('.lesson-body');
            
            allBodies.forEach(b => {
                if (b.id !== `lesson-body-${lessonId}`) {
                    b.classList.remove('active');
                }
            });

            body.classList.toggle('active');
        }

        let selectedAnswers = {};

        function selectOption(lessonId, optionIndex) {
            selectedAnswers[lessonId] = optionIndex;
            const options = document.querySelectorAll(`#quiz-${lessonId} .quiz-option`);
            options.forEach((opt, i) => {
                opt.classList.toggle('selected', i === optionIndex);
            });
        }

        function submitQuiz(lessonId) {
            const lesson = lessons.find(l => l.id === lessonId);
            const selectedIndex = selectedAnswers[lessonId];
            
            if (selectedIndex === undefined) {
                alert('Veuillez s√©lectionner une r√©ponse');
                return;
            }

            // Track attempt
            state.quizAttempts[lessonId] = (state.quizAttempts[lessonId] || 0) + 1;

            const isCorrect = selectedIndex === lesson.quiz.correct;
            const feedback = document.getElementById(`feedback-${lessonId}`);
            const options = document.querySelectorAll(`#quiz-${lessonId} .quiz-option`);
            
            options.forEach((opt, i) => {
                opt.style.pointerEvents = 'none';
                if (i === lesson.quiz.correct) {
                    opt.classList.add('correct');
                } else if (i === selectedIndex && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            feedback.style.display = 'block';
            feedback.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.textContent = isCorrect ? lesson.quiz.feedback.correct : lesson.quiz.feedback.incorrect;

            document.getElementById(`submit-${lessonId}`).style.display = 'none';

            // Record score
            state.quizScores[lessonId] = isCorrect ? 100 : 0;

            if (isCorrect && !state.completedLessons.includes(lessonId)) {
                state.completedLessons.push(lessonId);
                state.totalPoints += lesson.points;
                
                setTimeout(() => {
                    updateProgress();
                    renderLessons();
                }, 1500);
            } else {
                // Even if incorrect, save the attempt
                saveUserProgress();
            }
        }

        function showCompletionModal() {
            document.getElementById('completionModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('completionModal').classList.remove('active');
        }

        // Save progress periodically
        setInterval(() => {
            if (currentUser) {
                saveUserProgress();
            }
        }, 60000); // Every minute

        // Save on page unload
        window.addEventListener('beforeunload', () => {
            if (currentUser) {
                saveUserProgress();
            }
        });
    </script>
</body>
</html>